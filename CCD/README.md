# CCD Project

本工程主要完成白线识别。借助线阵CCD传感器128个像素点的返回值，确定出白条的相对位置，进而通过PID调节可以控制小车转向。

程序的硬件是STM32F401，软件是MDK5.
其中主函数在USER/main.c，核心函数在HARDWARE/CCD/ccd.c下

工程包含以下4个部分

- 像素点ADC采集

  ```
  主要是通过AD采集采集128个像素点的AD值
  共有五个引脚  SI CLK AO VCC GND
  SI 和CLK 控制时序 根据时序进行曝光时间控制 和采集每个像素点值
  AO 需要一个能进行AD转换的引脚进行采集
  ```

- 寻找白线边界

  ```
  从128个像素点中找到最大值max，均值ave，进而确定阈值threshold=max+ave
  找到左边界，右边界，进而确定出白条宽度，中间位置
  ```

  

- 自动曝光

  ```
  曝光时间根据128个像素点的最大值max进行确定
  ```

  

- 通过串口将识别结果向外发送

  ```
  发送数据格式如下
  第一个字符是'a'
  第二个字符是白条的中间坐标
  第三个字符是曝光时间
  第四个字符是白条宽度
  
  ```

  



